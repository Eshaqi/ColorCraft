import{createSearchBar}from"./components/searchBar.js";import{renderColorCard}from"./components/colorCard.js";import{renderFavorites}from"./components/favorites.js";import{downloadFavoritesAsJson,downloadFavoritesAsCsv}from"./components/download.js";import{setupThemeToggle}from"./components/theme.js";import{renderHistory}from"./components/history.js";import{attachClearHandler}from"./utils/clearHandler.js";import{HISTORY_KEY,FAVORITES_KEY}from"./utils/constants.js";import{animateAction}from"./utils/loader.js";import{handleSearch}from"./components/searchHandler.js";import{appendChildren}from"./utils/domHelper.js";function main(){const e=document.getElementById("searchSection"),r=document.getElementById("downloadJsonBtn"),o=document.getElementById("downloadCsvBtn"),{element:t,clearInput:n,onSearch:a,button:i}=createSearchBar();appendChildren(e,t),a(e=>animateAction({element:i,callback:()=>handleSearch(e,n),loadingText:"",finalText:"",finalTextFail:""})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("service-worker.js").then(e=>console.log("✅ Service Worker registered:",e.scope)).catch(e=>console.error("❌ Service Worker registration failed:",e))}),r.addEventListener("click",()=>animateAction({element:r,callback:()=>(downloadFavoritesAsJson(),!0),loadingText:"Downloading..."})),o.addEventListener("click",()=>animateAction({element:o,callback:()=>(downloadFavoritesAsCsv(),!0),loadingText:"Downloading..."})),setupThemeToggle(),renderFavorites(),renderHistory(),attachClearHandler("clearHistoryBtn",HISTORY_KEY,renderHistory),attachClearHandler("clearFavoritesBtn",FAVORITES_KEY,renderFavorites)}window.addEventListener("historyColorSelected",e=>{const{hex:r,r:o,g:t,b:n}=e.detail,a=document.getElementById("paletteDisplay");a.innerHTML="";const i=renderColorCard({hex:r,r:o,g:t,b:n});appendChildren(a,i)}),main();